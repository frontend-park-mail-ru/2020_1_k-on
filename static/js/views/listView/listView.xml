<fest:template xmlns:fest="http://fest.mail.ru" context_name="data">
    <div class="list-page">
        <div class="list-header page-layout">
            <div class="list-header__path user-path">
                <a class="movie-header__path-href user-path__href" href="/">
                    Главная
                </a>
                <fest:space/>/
                <fest:space/>

                <fest:value>data.category</fest:value>
            </div>

            <div class="list-header__headline">
                <fest:value>data.category</fest:value>
            </div>
        </div>

        <div class="filters-block page-layout">
            <fest:for iterate="data.filtersList" index="i" value="filterName">
                <div class="filter-button" data-name="{filterName}">
                    <span class="filter-button__filter-value">
                        <fest:value>data.chosenFilters[filterName].name</fest:value>
                    </span>
                    <div class="filter-button__arrow"/>
                </div>

                <div class="filter-submenu page-layout" data-name="{filterName}">
                    <fest:for iterate="data.filters[filterName]" index="j" value="filterItem">
                        <div>
                            <fest:choose>
                                <fest:when test="filterItem.name === data.chosenFilters[filterName].name">
                                    <span class="filter-submenu__item filter-submenu__item_active"
                                          data-value="{filterItem.value}">
                                        <fest:value>filterItem.name</fest:value>
                                    </span>
                                </fest:when>

                                <fest:otherwise>
                                    <span class="filter-submenu__item" data-value="{filterItem.value}">
                                        <fest:value>filterItem.name</fest:value>
                                    </span>
                                </fest:otherwise>
                            </fest:choose>
                        </div>

                    </fest:for>
                </div>
            </fest:for>
        </div>

        <div class="series-block page-layout">
            <fest:for iterate="data.list" index="i" value="series">
                <a class="series-card" href="/movie">
                    <div class="series-card__image" style="background-image: url({series.image})">
                        <span class="series-card__age-limit">
                            <fest:value>series.ageLimit</fest:value>+
                        </span>
                        <div class="series-card__gradient"/>
                        <div class="series-card__content">
                            <div class="series-card__content-row">
                                <fest:value>series.year</fest:value>
                            </div>
                            <div class="series-card__content-row">
                                <fest:value>series.country</fest:value>
                            </div>
                            <div class="series-card__content-row">
                                <fest:value>series.genre</fest:value>
                            </div>
                        </div>
                    </div>
                    <span class="series-card__name">
                        <fest:value>series.name</fest:value>
                    </span>
                </a>
            </fest:for>
        </div>
    </div>
</fest:template>
